<main>
  <input type="radio" id="main" name="charlist-item" value="main" checked>
  <label for="main">Main</label>
  <input type="radio" id="details" name="charlist-item" value="details">
  <label for="details">Details</label>
  <input type="radio" id="chants" name="charlist-item" value="chants">
  <label for="chants">Chants</label>
  <input type="radio" id="spells" name="charlist-item" value="spells">
  <label for="spells">Spells</label>
  <input type="radio" id="settings" name="charlist-item" value="settings">
  <label for="settings">Settings</label>

  <!-- Main -->
  <div class="sheet-main">
    <!-- Header -->
    <div class="sheet-main-header">
      <h1> ENOA </h1>
      <input type="text" id="attr_character_name" name="attr_character_name" title="@{character_name}">
      <label for="attr_character_name">Character Name</label>
      <!-- Edit -->
      <div class="sheet-main-header-edit">
        <!-- TODO -->
      </div>
      <!-- Display -->
      <div class="sheet-main-header-display">
        <input type="text" id="attr_class_display" name="attr_class_display" title="@{class_display}">
        <label for="attr_class_display">Class and Level</label>
        <input type="text" id="attr_background" name="attr_background" title="@{background}">
        <label for="attr_background">Background</label>
        <input type="text" id="attr_race_display" name="attr_class_display" title="@{race_display}">
        <label for="attr_race_display">Race</label>
      </div>
      <input type="text" id="attr_player_name" name="attr_player_name" title="@{player_name}">
      <label for="attr_player_name">Player and campany</label>
    </div>
    <div class="sheet-main-container">
      <!-- Attributes -->
      <div class="sheet-attributes">
        <!-- Flint -->
        <div class="sheet-flint">
          <span name="attr_flint_mod" title="@{flint_mod}">0</span>
          <button type="roll" name="roll_flint_bonus"
            value="&{template:rolls} {{title=Flint}} {{subtitle=@{character_name} }} {{roll= [[d20+@{flint_mod}[flint_mod] ]]}}">
            Flint Bonus
          </button>
        </div>
        <!-- Strength -->
        <div class="sheet-attribute">
          <span name="attr_strength_mod" title="@{strength_mod}">0</span>
          <input type="number" id="attr_strength_base" name="attr_strength_base" value="0" title="@{strength_base}" />
          <button type="roll" name="roll_strength" value="">
            Strength
          </button>
        </div>
        <!-- Wisdom -->
        <div class="sheet-attribute">
          <span name="attr_wisdom_mod" title="@{wisdom_mod}">0</span>
          <input type="number" id="attr_wisdom_base" name="attr_wisdom_base" value="0" title="@{wisdom_base}" />
          <button type="roll" name="roll_wisdom" value="">
            Wisdom
          </button>
        </div>
        <!-- Constitution -->
        <div class="sheet-attribute">
          <span name="attr_constitution_mod" title="@{constitution_mod}">0</span>
          <input type="number" id="attr_constitution_base" name="attr_constitution_base" value="0"
            title="@{constitution_base}" />
          <button type="roll" name="roll_constitution" value="">
            Constitution
          </button>
        </div>
        <!-- Spark -->
        <div class="sheet-spark">
          <span name="attr_spark_mod" title="@{spark_mod}">0</span>
          <button type="roll" name="roll_spark_bonus" value="">
            Spark Bonus
          </button>
        </div>
        <!-- Intelligence -->
        <div class="sheet-attribute">
          <span name="attr_intelligence_mod" title="@{intelligence_mod}">0</span>
          <input type="number" id="attr_intelligence_base" name="attr_intelligence_base" value="0"
            title="@{intelligence_base}" />
          <button type="roll" name="roll_intelligence" value="">
            Intelligence
          </button>
        </div>
        <!-- Dexterity -->
        <div class="sheet-attribute">
          <span name="attr_dexterity_mod" title="@{dexterity_mod}">0</span>
          <input type="number" id="attr_dexterity_base" name="attr_dexterity_base" value="0"
            title="@{dexterity_base}" />
          <button type="roll" name="roll_dexterity" value="">
            Dexterity
          </button>
        </div>
        <!-- Charisma -->
        <div class="sheet-attribute">
          <span name="attr_charisma_mod" title="@{charisma_mod}">0</span>
          <input type="number" id="attr_charisma_base" name="attr_charisma_base" value="0" title="@{charisma_base}" />
          <button type="roll" name="roll_charisma" value="">
            Charisma
          </button>
        </div>
      </div>
      <!-- Proficiency bonus-->
      <div class="sheet-proficiency-bonus">
        <span>Proficiency Bonus</span>
        <span name="attr_pb" title="@{pb}"></span>
      </div>
      <!-- Savethrows -->
      <div class="sheet-saves">
        <!-- Strength Save -->
        <div class="sheet-savethrow">
          <input type="checkbox" name="attr_strength_save_prof" title="@{strength_save_prof}" value="(@{pb})">
          <span></span>
          <input type="number" id="attr_strength_save_bonus" name="attr_strength_save_bonus" value="0"
            title="@{strength_save_bonus}" disabled />
          <button type="roll" name="roll_strength_save" value="">
            Strength
          </button>
        </div>
        <!-- Wisdom Save -->
        <div class="sheet-savethrow">
          <input type="checkbox" name="attr_wisdom_save_prof" title="@{wisdom_save_prof}" value="(@{pb})">
          <span></span>
          <input type="number" id="attr_wisdom_save_bonus" name="attr_wisdom_save_bonus" value="0"
            title="@{wisdom_save_bonus}" disabled />
          <button type="roll" name="roll_wisdom_save" value="">
            Wisdom
          </button>
        </div>
        <!-- Constitution Save-->
        <div class="sheet-savethrow">
          <input type="checkbox" name="attr_constitution_save_prof" title="@{constitution_save_prof}" value="(@{pb})">
          <span></span>
          <input type="number" id="attr_constitution_save_bonus" name="attr_constitution_save_bonus" value="0"
            title="@{constitution_save_bonus}" disabled />
          <button type="roll" name="roll_constitution_save" value="">
            Constitution
          </button>
        </div>
        <!-- Intelligence Save-->
        <div class="sheet-savethrow">
          <input type="checkbox" name="attr_intelligence_save_prof" title="@{intelligence_save_prof}" value="(@{pb})">
          <span></span>
          <input type="number" id="attr_intelligence_save_bonus" name="attr_intelligence_save_bonus" value="0"
            title="@{intelligence_save_bonus}" disabled />
          <button type="roll" name="roll_intelligence_save" value="">
            Intelligence
          </button>
        </div>
        <!-- Dexterity Save -->
        <div class="sheet-savethrow">
          <input type="checkbox" name="attr_dexterity_save_prof" title="@{dexterity_save_prof}" value="(@{pb})">
          <span></span>
          <input type="number" id="attr_dexterity_save_bonus" name="attr_dexterity_save_bonus" value="0"
            title="@{dexterity_save_bonus}" disabled />
          <button type="roll" name="roll_dexterity_save" value="">
            Dexterity
          </button>
        </div>
        <!-- Charisma Save -->
        <div class="sheet-savethrow">
          <input type="checkbox" name="attr_charisma_save_prof" title="@{charisma_save_prof}" value="(@{pb})">
          <span></span>
          <input type="number" id="attr_charisma_save_bonus" name="attr_charisma_save_bonus" value="0"
            title="@{charisma_save_bonus}" disabled />
          <button type="roll" name="roll_charisma_save" value="">
            Charisma
          </button>
        </div>
        <span>Savethrows</span>
      </div>
      <!-- Skills -->
      <div class="sheet-skills">
        <!-- Acrobatics -->
        <div class="sheet-skill">
          <input type="checkbox" name="attr_acrobatics_prof" title="@{acrobatics_prof}"
            value="(@{pb}*@{acrobatics_type})">
          <span></span>
          <span name="attr_acrobatics_bonus" title="@{acrobatics_bonus}">0</span>
          <button type="roll" name="roll_acrobatics" value="">
            Acrobatics
          </button>
          <select name="attr_acrobatics_attribute" title="@{acrobatics_attribute}">
            <option value="Strength">Str</option>
            <option value="Wisdom">Wis</option>
            <option value="Constitution">Con</option>
            <option value="Intelligence">Int</option>
            <option value="Dexterity" selected="selected">Dex</option>
            <option value="Charisma">Cha</option>
          </select>
        </div>
        <!-- Athletics -->
        <div class="sheet-skill">
          <input type="checkbox" name="attr_athletics_prof" title="@{athletics_prof}" value="(@{pb}*@{athletics_type})">
          <span></span>
          <span name='attr_athletics_bonus' title='@{athletics_bonus}'>0</span>
          <button type='roll' name='roll_athletics' value=''>
            Athletics
          </button>
          <select name="attr_athletics_attribute" title="@{athletics_attribute}">
            <option value="Strength" selected="selected">Str</option>
            <option value="Wisdom">Wis</option>
            <option value="Constitution">Con</option>
            <option value="Intelligence">Int</option>
            <option value="Dexterity">Dex</option>
            <option value="Charisma">Cha</option>
          </select>
        </div>
        <!-- Perception -->
        <div class="sheet-skill">
          <input type="checkbox" name="attr_perception_prof" title="@{perception_prof}"
            value="(@{pb}*@{perception_type})">
          <span></span>
          <span name='attr_perception_bonus' title='@{perception_bonus}'>0</span>
          <button type='roll' name='roll_perception' value=''>
            Perception
          </button>
          <select name="attr_perception_attribute" title="@{perception_attribute}">
            <option value="Strength">Str</option>
            <option value="Wisdom" selected="selected">Wis</option>
            <option value="Constitution">Con</option>
            <option value="Intelligence">Int</option>
            <option value="Dexterity">Dex</option>
            <option value="Charisma">Cha</option>
          </select>
        </div>
        <!-- Survival -->
        <div class="sheet-skill">
          <input type="checkbox" name="attr_survival_prof" title="@{survival_prof}" value="(@{pb}*@{survival_type})">
          <span></span>
          <span name='attr_survival_bonus' title='@{survival_bonus}'>0</span>
          <button type='roll' name='roll_survival' value=''>
            Survival
          </button>
          <select name="attr_survival_attribute" title="@{survival_attribute}">
            <option value="Strength">Str</option>
            <option value="Wisdom" selected="selected">Wis</option>
            <option value="Constitution">Con</option>
            <option value="Intelligence">Int</option>
            <option value="Dexterity">Dex</option>
            <option value="Charisma">Cha</option>
          </select>
        </div>
        <!-- Animal Handling -->
        <div class="sheet-skill">
          <input type="checkbox" name="attr_animal_handling_prof" title="@{animal_handling_prof}"
            value="(@{pb}*@{animal_handling_type})">
          <span></span>
          <span name='attr_animal_handling_bonus' title='@{animal_handling_bonus}'>0</span>
          <button type='roll' name='roll_animal_handling' value=''>
            Animal Handling
          </button>
          <select name="attr_animal_handling_attribute" title="@{animal_handling_attribute}">
            <option value="Strength">Str</option>
            <option value="Wisdom" selected="selected">Wis</option>
            <option value="Constitution">Con</option>
            <option value="Intelligence">Int</option>
            <option value="Dexterity">Dex</option>
            <option value="Charisma">Cha</option>
          </select>
        </div>
        <!-- Intimidation -->
        <div class="sheet-skill">
          <input type="checkbox" name="attr_intimidation_prof" title="@{intimidation_prof}"
            value="(@{pb}*@{intimidation_type})">
          <span></span>
          <span name='attr_intimidation_bonus' title='@{intimidation_bonus}'>0</span>
          <button type='roll' name='roll_intimidation' value=''>
            Intimidation
          </button>
          <select name="attr_intimidation_attribute" title="@{intimidation_attribute}">
            <option value="Strength">Str</option>
            <option value="Wisdom">Wis</option>
            <option value="Constitution">Con</option>
            <option value="Intelligence">Int</option>
            <option value="Dexterity">Dex</option>
            <option value="Charisma" selected="selected">Cha</option>
          </select>
        </div>
        <!-- Performance -->
        <div class="sheet-skill">
          <input type="checkbox" name="attr_performance_prof" title="@{performance_prof}"
            value="(@{pb}*@{performance_type})">
          <span></span>
          <span name='attr_performance_bonus' title='@{performance_bonus}'>0</span>
          <button type='roll' name='roll_performance' value=''>
            Performance
          </button>
          <select name="attr_performance_attribute" title="@{performance_attribute}">
            <option value="Strength">Str</option>
            <option value="Wisdom">Wis</option>
            <option value="Constitution">Con</option>
            <option value="Intelligence">Int</option>
            <option value="Dexterity">Dex</option>
            <option value="Charisma" selected="selected">Cha</option>
          </select>
        </div>
        <!-- Sleight of Hand -->
        <div class="sheet-skill">
          <input type="checkbox" name="attr_sleight_of_hand_prof" title="@{sleight_of_hand_prof}"
            value="(@{pb}*@{sleight_of_hand_type})">
          <span></span>
          <span name='attr_sleight_of_hand_bonus' title='@{sleight_of_hand_bonus}'>0</span>
          <button type='roll' name='roll_sleight_of_hand' value=''>
            Sleight of Hand
          </button>
          <select name="attr_sleight_of_hand_attribute" title="@{sleight_of_hand_attribute}">
            <option value="Strength">Str</option>
            <option value="Wisdom">Wis</option>
            <option value="Constitution">Con</option>
            <option value="Intelligence">Int</option>
            <option value="Dexterity" selected="selected">Dex</option>
            <option value="Charisma">Cha</option>
          </select>
        </div>
        <!-- Arcana -->
        <div class="sheet-skill">
          <input type="checkbox" name="attr_arcana_prof" title="@{arcana_prof}" value="(@{pb}*@{arcana_type})">
          <span></span>
          <span name='attr_arcana_bonus' title='@{arcana_bonus}'>0</span>
          <button type='roll' name='roll_arcana' value=''>
            Arcana
          </button>
          <select name="attr_arcana_attribute" title="@{arcana_attribute}">
            <option value="Strength">Str</option>
            <option value="Wisdom">Wis</option>
            <option value="Constitution">Con</option>
            <option value="Intelligence" selected="selected">Int</option>
            <option value="Dexterity">Dex</option>
            <option value="Charisma">Cha</option>
          </select>
        </div>
        <!-- Medicine -->
        <div class="sheet-skill">
          <input type="checkbox" name="attr_medicine_prof" title="@{medicine_prof}" value="(@{pb}*@{medicine_type})">
          <span></span>
          <span name='attr_medicine_bonus' title='@{medicine_bonus}'>0</span>
          <button type='roll' name='roll_medicine' value=''>
            Medicine
          </button>
          <select name="attr_medicine_attribute" title="@{medicine_attribute}">
            <option value="Strength">Str</option>
            <option value="Wisdom" selected="selected">Wis</option>
            <option value="Constitution">Con</option>
            <option value="Intelligence">Int</option>
            <option value="Dexterity">Dex</option>
            <option value="Charisma">Cha</option>
          </select>
        </div>
        <!-- Deception -->
        <div class="sheet-skill">
          <input type="checkbox" name="attr_deception_prof" title="@{deception_prof}" value="(@{pb}*@{deception_type})">
          <span></span>
          <span name='attr_deception_bonus' title='@{deception_bonus}'>0</span>
          <button type='roll' name='roll_deception' value=''>
            Deception
          </button>
          <select name="attr_deception_attribute" title="@{deception_attribute}">
            <option value="Strength">Str</option>
            <option value="Wisdom">Wis</option>
            <option value="Constitution">Con</option>
            <option value="Intelligence">Int</option>
            <option value="Dexterity">Dex</option>
            <option value="Charisma" selected="selected">Cha</option>
          </select>
        </div>
        <!-- Nature -->
        <div class="sheet-skill">
          <input type="checkbox" name="attr_nature_prof" title="@{nature_prof}" value="(@{pb}*@{nature_type})">
          <span></span>
          <span name='attr_nature_bonus' title='@{nature_bonus}'>0</span>
          <button type='roll' name='roll_nature' value=''>
            Nature
          </button>
          <select name="attr_nature_attribute" title="@{nature_attribute}">
            <option value="Strength">Str</option>
            <option value="Wisdom">Wis</option>
            <option value="Constitution">Con</option>
            <option value="Intelligence" selected="selected">Int</option>
            <option value="Dexterity">Dex</option>
            <option value="Charisma">Cha</option>
          </select>
        </div>
        <!-- Insight -->
        <div class="sheet-skill">
          <input type="checkbox" name="attr_insight_prof" title="@{insight_prof}" value="(@{pb}*@{insight_type})">
          <span></span>
          <span name='attr_insight_bonus' title='@{insight_bonus}'>0</span>
          <button type='roll' name='roll_insight' value=''>
            Insight
          </button>
          <select name="attr_insight_attribute" title="@{insight_attribute}">
            <option value="Strength">Str</option>
            <option value="Wisdom" selected="selected">Wis</option>
            <option value="Constitution">Con</option>
            <option value="Intelligence">Int</option>
            <option value="Dexterity">Dex</option>
            <option value="Charisma">Cha</option>
          </select>
        </div>
        <!-- Investigation -->
        <div class="sheet-skill">
          <input type="checkbox" name="attr_investigation_prof" title="@{investigation_prof}"
            value="(@{pb}*@{investigation_type})">
          <span></span>
          <span name='attr_investigation_bonus' title='@{investigation_bonus}'>0</span>
          <button type='roll' name='roll_investigation' value=''>
            Investigation
          </button>
          <select name="attr_investigation_attribute" title="@{investigation_attribute}">
            <option value="Strength">Str</option>
            <option value="Wisdom">Wis</option>
            <option value="Constitution">Con</option>
            <option value="Intelligence" selected="selected">Int</option>
            <option value="Dexterity">Dex</option>
            <option value="Charisma">Cha</option>
          </select>
        </div>
        <!-- Stealth -->
        <div class="sheet-skill">
          <input type="checkbox" name="attr_stealth_prof" title="@{stealth_prof}" value="(@{pb}*@{stealth_type})">
          <span></span>
          <span name='attr_stealth_bonus' title='@{stealth_bonus}'>0</span>
          <button type='roll' name='roll_stealth' value=''>
            Stealth
          </button>
          <select name="attr_stealth_attribute" title="@{stealth_attribute}">
            <option value="Strength">Str</option>
            <option value="Wisdom">Wis</option>
            <option value="Constitution">Con</option>
            <option value="Intelligence">Int</option>
            <option value="Dexterity" selected="selected">Dex</option>
            <option value="Charisma">Cha</option>
          </select>
        </div>
        <!-- Traditions -->
        <div class="sheet-skill">
          <input type="checkbox" name="attr_traditions_prof" title="@{traditions_prof}"
            value="(@{pb}*@{traditions_type})">
          <span></span>
          <span name='attr_traditions_bonus' title='@{traditions_bonus}'>0</span>
          <button type='roll' name='roll_traditions' value=''>
            Traditions
          </button>
          <select name="attr_traditions_attribute" title="@{traditions_attribute}">
            <option value="Strength">Str</option>
            <option value="Wisdom">Wis</option>
            <option value="Constitution">Con</option>
            <option value="Intelligence" selected="selected">Int</option>
            <option value="Dexterity">Dex</option>
            <option value="Charisma">Cha</option>
          </select>
        </div>
        <!-- Persuasion -->
        <div class="sheet-skill">
          <input type="checkbox" name="attr_persuasion_prof" title="@{persuasion_prof}"
            value="(@{pb}*@{persuasion_type})">
          <span></span>
          <span name='attr_persuasion_bonus' title='@{persuasion_bonus}'>0</span>
          <button type='roll' name='roll_persuasion' value=''>
            Persuasion
          </button>
          <select name="attr_persuasion_attribute" title="@{persuasion_attribute}">
            <option value="Strength">Str</option>
            <option value="Wisdom">Wis</option>
            <option value="Constitution">Con</option>
            <option value="Intelligence">Int</option>
            <option value="Dexterity">Dex</option>
            <option value="Charisma" selected="selected">Cha</option>
          </select>
        </div>
        <span>Skills</span>
      </div>
      <!-- Word Destiny Sign -->
      <div class="sheet-word-sign-destiny">
        <span>Word</span>
        <span>Sign</span>
        <span>Destiny</span>
      </div>
      <!-- Proficiencies -->
      <!-- <div class="sheet-proficiencies">
        <fieldset class="repeating_proficiencies">
          <div class="sheet-fieldset-item sheet-fieldset-item-proficiency">
            <div class="sheet-checkbox-cog">
              <input type="checkbox" name="attr_options-flag" checked="checked"><span></span>
              <span class="sheet-toggle-icon"></span>
            </div>
            <input type="checkbox" name="attr_options-flag" checked="checked" class="sheet-toggle">
            <div class="sheet-toggle-checked">
              <div class="sheet-form">
                <div class="sheet-form-header">Edit Proficiency</div>
                <div class="sheet-form-body">
                  <div class="sheet-form-group">
                    <select name="attr_prof_type">
                      <option value="LANGUAGE" selected="selected">Language</option>
                      <option value="WEAPON">Weapon</option>
                      <option value="ARMOR">Armor</option>
                      <option value="OTHER">Other</option>
                    </select>
                    <input type="text" name="attr_name">
                  </div>
                </div>
              </div>
            </div>
            <div class="sheet-toggle-unchecked">
              <div class="sheet-pc-proficiency">
                <button type="roll" name="roll_output"
                  value="@{wtype}&{template:traits} @{charname_output} {{name=@{prof_type} PROFICIENCY}} {{description=@{name}}}">
                  <span name="attr_prof_type"></span>
                  <span name="attr_name"></span>
                </button>
              </div>
            </div>
          </div>
        </fieldset>
        <span>Languages</span>
      </div> -->
      <!-- Mastery -->
      <!-- <div class="sheet-mastery">
        <fieldset class="repeating_tool">
          <div class="sheet-fieldset-item sheet-fieldset-item-tool">
            <div class="sheet-checkbox-cog">
              <input type="checkbox" name="attr_options-flag" checked="checked"><span></span>
              <span class="sheet-toggle-icon"></span>
            </div>
            <input type="checkbox" name="attr_options-flag" checked="checked" class="sheet-toggle">
            <div class="sheet-toggle-checked">
              <div class="sheet-form">
                <div class="sheet-form-header">Edit Proficiency</div>
                <div class="sheet-form-body">
                  <div class="sheet-form-group">
                    <label>Name:</label>
                    <input type="text" name="attr_toolname">
                  </div>
                  <div class="sheet-form-group">
                    <label>Proficiency Bonus:</label>
                    <select name="attr_toolbonus_base">
                      <option value="(@{pb})" selected="selected">PROFICIENT</option>
                      <option value="(@{pb}*2)">EXPERTISE</option>
                      <option value="(floor(@{pb}/2))">JACK OF ALL TRADES</option>
                    </select>
                  </div>
                  <div class="sheet-form-group">
                    <label>Attribute:</label>
                    <select name="attr_toolattr_base">
                      <option value="@{strength_mod}" selected="selected">Str</option>
                      <option value="@{wisdom_mod}">Wis</option>
                      <option value="@{constitution_mod}">Con</option>
                      <option value="@{intelligence_mod}">Int</option>
                      <option value="@{dexterity_mod}">Dex</option>
                      <option value="@{charisma_mod}">Cha</option>
                      <option
                        value="?{Attribute?|Strength,@{strength_mod}|Dexterity,@{dexterity_mod}|Constitution,@{constitution_mod}|Intelligence,@{intelligence_mod}|Wisdom,@{wisdom_mod}|Charisma,@{charisma_mod}}">
                        Query</option>
                    </select>
                    <label>Mods:</label>
                    <input type="text" name="attr_tool_mod" title="@{tool_mod}" value="0">
                  </div>
                </div>
              </div>
            </div>
            <div class="sheet-toggle-unchecked">
              <div class="sheet-pc-tool">
                <button type="roll" name="roll_tool" value="">
                  <span></span>
                  <span name="attr_toolbonus_display"></span>
                  <span name="attr_toolname"></span>
                  <input type="hidden" name="attr_toolbonus">
                  <span name="attr_toolattr"></span>
                </button>
              </div>
            </div>
          </div>
        </fieldset>
        <span>Proficiencies</span>
      </div> -->
      <!-- Armor Class -->
      <!-- <div class="sheet-ac">
        <input type="text" name="attr_ac" title="@{ac}">
        <button type="roll" name="roll_defence" value="">
          Armor Class
        </button>
      </div> -->
      <!-- Initiative -->
      <!-- <div class="sheet-initiative">
        <span name="attr_initiative_bonus" title="@{initiative_bonus}"></span>
        <button type="roll" name="roll_initiative" value="">
          Initiative
        </button>
      </div> -->
      <!-- Speed -->
      <!-- <div class="sheet-speed">
        <input type="text" name="attr_speed" title="@{speed}">
        <span>Speed</span>
      </div> -->
      <!-- Max HP -->
      <!-- <div class="sheet-hp-max">
        <span>HP MAX</span>
        <input type="text" name="attr_hp_max" title="@{hp_max}">
      </div> -->
      <!-- Current HP -->
      <!-- <div class="sheet-hp-current">
        <span>HP Current</span>
        <input type="text" name="attr_hp" title="@{hp}">
        <input type="text" name="attr_hp_temp" title="@{hp_temp}">
      </div> -->
      <!-- Hit Dices -->
      <!-- <div class="sheet-hit-dices">
        <div class="sheet-hot-dices-all">
          <span>All</span>
          <input type="text" name="attr_hit_dice_max" title="@{hit_dice_max}">
        </div>
        <div class="sheet-hot-dices-current">
          <input type="text" name="attr_hit_dice" title="@{hit_dice}">
          <button type="roll" name="roll_hit_dice" value="">
            Hit Dice
          </button>
        </div>
      </div> -->
      <!-- Death saves -->
      <!-- <div class="sheet-deathsaves">
        <div class="sheet-death-save-success">
          <span>Success</span>
          <input type="checkbox" name="attr_deathsave_success1" title="@{deathsave_success1}">
          <input type="checkbox" name="attr_deathsave_success2" title="@{deathsave_success2}">
          <input type="checkbox" name="attr_deathsave_success3" title="@{deathsave_success3}">
        </div>
        <div class="sheet-death-save-failure">
          <span>Failure</span>
          <input type="checkbox" name="attr_deathsave_fail1" title="@{deathsave_fail1}">
          <input type="checkbox" name="attr_deathsave_fail2" title="@{deathsave_fail2}">
          <input type="checkbox" name="attr_deathsave_fail3" title="@{deathsave_fail3}">
        </div>
        <button type="roll" name="roll_death_save" value="">
          Death Saves
        </button>
      </div> -->
      <!-- Attacks -->
      <!-- <div class="sheet-attacks">
        <fieldset class="repeating_attack">
          <div class="sheet-fieldset-item">
            <div class="sheet-checkbox-cog">
              <input type="checkbox" name="attr_options-flag" checked="checked"><span></span>
              <span class="sheet-toggle-icon"></span>
            </div>
            <input type="checkbox" name="attr_options-flag" checked="checked" class="sheet-toggle" hidden>
            <div class="sheet-toggle-checked">
              <div class="sheet-form">
                <div class="sheet-form-header">Edit Attack</div>
                <div class="sheet-form-body">
                  <div class="sheet-form-group">
                    <label>Name:</label>
                    <input type="text" name="attr_atkname">
                  </div>
                  <div class="sheet-form-group">
                    <label class="sheet-form-checkbox">
                      <input type="checkbox" name="attr_atkflag" value="{{attack=1}}" checked="checked">
                      <span>Attack:</span>
                    </label>
                  </div>
                  <div class="sheet-form-group">
                    <select name="attr_atkattr_base">
                      <option value="@{strength_mod}" selected="selected">STR</option>
                      <option value="@{wisdom_mod}">WIS</option>
                      <option value="@{constitution_mod}">CON</option>
                      <option value="@{intelligence_mod}">INT</option>
                      <option value="@{dexterity_mod}">DEX</option>
                      <option value="@{charisma_mod}">CHA</option>
                      <option value="spell">SPELL</option>
                      <option value="0">-</option>
                    </select>
                    <span>+</span>
                    <input type="text" name="attr_atkmod" placeholder="0">
                    <label class="sheet-form-checkbox">
                      <input type="checkbox" name="attr_atkprofflag" value="(@{pb})" checked="checked">
                      <span>Proficient</span>
                    </label>
                  </div>
                  <div class="sheet-form-group">
                    <label>Range:</label>
                    <input type="text" name="attr_atkrange">
                  </div>
                  <div class="sheet-form-group">
                    <label>Magic Bonus:</label>
                    <input type="text" name="attr_atkmagic">
                    <label>Crit Range:</label>
                    <input type="text" name="attr_atkcritrange" value="20">
                  </div>
                  <div class="sheet-form-group">
                    <label class="sheet-form-checkbox">
                      <input type="checkbox" name="attr_dmgflag" value="{{damage=1}} {{dmg1flag=1}}" checked="checked">
                      <span>Damage 1</span>
                    </label>
                  </div>
                  <div class="sheet-form-group">
                    <label>Dmg</label>
                    <input type="text" name="attr_dmgbase">
                    <span>+</span>
                    <select name="attr_dmgattr">
                      <option value="@{strength_mod}" selected="selected">STR</option>
                      <option value="@{wisdom_mod}">WIS</option>
                      <option value="@{constitution_mod}">CON</option>
                      <option value="@{intelligence_mod}">INT</option>
                      <option value="@{dexterity_mod}">DEX</option>
                      <option value="@{charisma_mod}">CHA</option>
                      <option value="spell">SPELL</option>
                      <option value="0">-</option>
                    </select>
                    <span>+</span>
                    <label>Mod</label>
                    <input type="text" name="attr_dmgmod">
                  </div>
                  <div class="sheet-form-group">
                    <label>Type:</label>
                    <input type="text" name="attr_dmgtype">
                    <label>Crit:</label>
                    <input type="text" name="attr_dmgcustcrit">
                  </div>
                  <div class="sheet-form-group">
                    <label class="sheet-form-checkbox">
                      <input type="checkbox" name="attr_dmg2flag" value="{{damage=1}} {{dmg2flag=1}}">
                      <span>Damage 2</span>
                    </label>
                  </div>
                  <div class="sheet-form-group">
                    <label>Dmg</label>
                    <input type="text" name="attr_dmg2base">
                    <span>+</span>
                    <select name="attr_dmg2attr">
                      <option value="@{strength_mod}">STR</option>
                      <option value="@{wisdom_mod}">WIS</option>
                      <option value="@{constitution_mod}">CON</option>
                      <option value="@{intelligence_mod}">INT</option>
                      <option value="@{dexterity_mod}">DEX</option>
                      <option value="@{charisma_mod}">CHA</option>
                      <option value="spell">SPELL</option>
                      <option value="0" selected="selected">-</option>
                    </select>
                    <span>+</span>
                    <label>Mod</label>
                    <input type="text" name="attr_dmg2mod">
                  </div>
                  <div class="sheet-form-group">
                    <label>Type:</label>
                    <input type="text" name="attr_dmg2type">
                    <label>Crit:</label>
                    <input type="text" name="attr_dmg2custcrit">
                  </div>
                  <div class="sheet-form-group">
                    <label class="sheet-form-checkbox">
                      <input type="checkbox" name="attr_saveflag"
                        value="{{save=1}} {{saveattr=@{saveattr}}} {{savedesc=@{saveeffect}}} {{savedc=[[[[@{savedc}]][SAVE]]]}}">
                      <span>Saving Throw</span>
                    </label>
                  </div>
                  <div class="sheet-form-group">
                    <select name="attr_saveattr">
                      <option value="Strength" selected="selected">STR</option>
                      <option value="Wisdom">WIS</option>
                      <option value="Constitution">CON</option>
                      <option value="Intelligence">INT</option>
                      <option value="Dexterity">DEX</option>
                      <option value="Charisma">CHA</option>
                    </select>
                    <label>vs DC:</label>
                    <select name="attr_savedc">
                      <option value="(@{spell_save_dc})" selected="selected">SPELL</option>
                      <option value="(@{strength_mod}+8+@{spell_dc_mod}+@{pb})">STR</option>
                      <option value="(@{wisdom_mod}+8+@{spell_dc_mod}+@{pb})">WIS</option>
                      <option value="(@{constitution_mod}+8+@{spell_dc_mod}+@{pb})">CON</option>
                      <option value="(@{intelligence_mod}+8+@{spell_dc_mod}+@{pb})">INT</option>
                      <option value="(@{dexterity_mod}+8+@{spell_dc_mod}+@{pb})">DEX</option>
                      <option value="(@{charisma_mod}+8+@{spell_dc_mod}+@{pb})">CHA</option>
                      <option value="(@{saveflat})">FLAT</option>
                    </select>
                    <input type="hidden" name="attr_savedc">
                    <input type="text" name="attr_saveflat" value="10">
                  </div>
                  <div class="sheet-form-group">
                    <label>Save Effect:</label>
                    <input type="text" name="attr_saveeffect">
                  </div>
                  <div class="sheet-form-group">
                    <label>Ammunition:</label>
                    <input type="text" name="attr_ammo">
                  </div>
                  <div class="sheet-form-group sheet-form-group-column">
                    <label>Description:</label>
                    <textarea name="attr_atk_desc"></textarea>
                  </div>
                </div>
              </div>
            </div>
            <div class="sheet-toggle-unchecked">
              <div class="sheet-pc-attack">
                <input type="text" name="attr_atkbonus" class="sheet-hidden" value="">
                <input type="text" name="attr_atkdmgtype" class="sheet-hidden" value="">
                <button type="roll" name="roll_attack" value="@{rollbase}" class="sheet-attack-button">
                  <span name="attr_atkname"></span>
                  <span name="attr_atkbonus"></span>
                  <span name="attr_atkdmgtype"></span>
                </button>
              </div>
            </div>
          </div>
          <input type="hidden" name="attr_rollbase">
          <input type="hidden" name="attr_rollbase_dmg">
          <input type="hidden" name="attr_rollbase_crit">
          <input type="hidden" name="attr_hldmg">
          <input type="hidden" name="attr_spelllevel">
          <input type="hidden" name="attr_itemid">
          <input type="hidden" name="attr_spellid">
          <input type="hidden" name="attr_spell_innate">
          <input type="hidden" name="attr_versatile_alt">
          <button type="roll" name="roll_attack_dmg" value="@{rollbase_dmg}" class="sheet-hidden"></button>
          <button type="roll" name="roll_attack_crit" value="@{rollbase_crit}" class="sheet-hidden"></button>
        </fieldset>
      </div> -->
      <!-- Inventory -->
      <!-- Flint and  Spark Trackers -->
      <!-- Dices Trackers -->
      <!-- Features -->

    </div>
  </div>
  <!-- Details -->
  <div class="sheet-details">
    <div class="sheet-details-header"></div>
    <div class="sheet-details-container"></div>
  </div>
  <!-- Chants -->
  <div class="sheet-chants">
    <div class="sheet-chants-header"></div>
    <div class="sheet-chants-container"></div>
  </div>
  <!-- Spells -->
  <div class="sheet-spells">
    <div class="sheet-spells-header"></div>
    <div class="sheet-spells-container"></div>
  </div>
  <!-- Settings -->
  <div class="sheet-settings">
    <div class="sheet-settings-header"></div>
    <div class="sheet-settings-container"></div>
  </div>

</main>

<!-- roll template -->
<div class="sheet-section-fields">
  <input type="hidden" name="attr_d20" value="1d20">
  <input type="hidden" name="attr_level" value="1">
  <input type="hidden" name="attr_pb" value="2">
  <input type="hidden" name="attr_pbd_safe" value="">
  <input type="hidden" name="attr_jack" value="1">
  <input type="hidden" name="attr_jack_attr" value="">
  <input type="hidden" name="attr_jack_bonus" value="">
  <input type="hidden" name="attr_passive_wisdom" value="10">
  <input type="hidden" name="attr_hitdie_final" value="">
  <input type="hidden" name="attr_globalsavingthrowbonus" value="">
  <input type="hidden" name="attr_death_save_bonus" value="0">
  <input type="hidden" name="attr_initiative_bonus" value="0">
  <input type="hidden" name="attr_spell_save_dc" value="0">
  <input type="hidden" name="attr_spell_attack_bonus" value="0">
  <input type="hidden" name="attr_spell_attack_mod" value="0">
  <input type="hidden" name="attr_npc_legendary_actions_desc" value="">
  <input type="hidden" name="attr_global_damage_mod_crit" value="0">
  <input type="hidden" name="attr_global_damage_mod_roll" value="0">
  <input type="hidden" name="attr_global_damage_mod_type" value="">
  <input type="hidden" name="attr_global_attack_mod" value="">
  <input type="hidden" name="attr_global_save_mod" value="">
  <input type="hidden" name="attr_global_skill_mod" value="">
  <input type="hidden" name="attr_exhaustion_1" value="">
  <input type="hidden" name="attr_exhaustion_2" value="">
  <input type="hidden" name="attr_exhaustion_3" value="">
  <input type="hidden" name="attr_exhaustion_4" value="">
  <input type="hidden" name="attr_exhaustion_5" value="">
  <input type="hidden" name="attr_exhaustion_6" value="">
  <input type="hidden" name="attr_exhaustion_base" value="0">
  <input type="hidden" name="attr_exhaustion_wounds" value="0">
  <input type="hidden" name="attr_exhaustion_conditions" value="0">
  <input type="hidden" name="attr_exhaustion_total" value="0">
  <input type="hidden" name="attr_exhaustion_status" value="0">
  <input type="hidden" name="attr_stress" value="0">
  <input type="hidden" name="attr_strength_mod" value="0">
  <input type="hidden" name="attr_wisdom_mod" value="0">
  <input type="hidden" name="attr_constitution_mod" value="0">
  <input type="hidden" name="attr_intelligence_mod" value="0">
  <input type="hidden" name="attr_dexterity_mod" value="0">
  <input type="hidden" name="attr_charisma_mod" value="0">
  <input type="hidden" name="attr_flint_mod" value="0">
  <input type="hidden" name="attr_spark_mod" value="0">
  <input type="hidden" name="attr_strength_save_bonus" value="0">
  <input type="hidden" name="attr_dexterity_save_bonus" value="0">
  <input type="hidden" name="attr_constitution_save_bonus" value="0">
  <input type="hidden" name="attr_intelligence_save_bonus" value="0">
  <input type="hidden" name="attr_wisdom_save_bonus" value="0">
  <input type="hidden" name="attr_charisma_save_bonus" value="0">
  <input type="hidden" name="attr_strength_maximum" value="20">
  <input type="hidden" name="attr_dexterity_maximum" value="20">
  <input type="hidden" name="attr_constitution_maximum" value="20">
  <input type="hidden" name="attr_intelligence_maximum" value="20">
  <input type="hidden" name="attr_wisdom_maximum" value="20">
  <input type="hidden" name="attr_charisma_maximum" value="20">
  <input type='hidden' name='attr_acrobatics_bonus' value='0'>
  <input type='hidden' name='attr_animal_handling_bonus' value='0'>
  <input type='hidden' name='attr_arcana_bonus' value='0'>
  <input type='hidden' name='attr_athletics_bonus' value='0'>
  <input type='hidden' name='attr_deception_bonus' value='0'>
  <input type='hidden' name='attr_history_bonus' value='0'>
  <input type='hidden' name='attr_insight_bonus' value='0'>
  <input type='hidden' name='attr_intimidation_bonus' value='0'>
  <input type='hidden' name='attr_investigation_bonus' value='0'>
  <input type='hidden' name='attr_medicine_bonus' value='0'>
  <input type='hidden' name='attr_nature_bonus' value='0'>
  <input type='hidden' name='attr_perception_bonus' value='0'>
  <input type='hidden' name='attr_performance_bonus' value='0'>
  <input type='hidden' name='attr_persuasion_bonus' value='0'>
  <input type='hidden' name='attr_religion_bonus' value='0'>
  <input type='hidden' name='attr_sleight_of_hand_bonus' value='0'>
  <input type='hidden' name='attr_stealth_bonus' value='0'>
  <input type='hidden' name='attr_survival_bonus' value='0'>
  <input type='hidden' name='attr_lvl1_slots_total' value='0'>
  <input type='hidden' name='attr_lvl2_slots_total' value='0'>
  <input type='hidden' name='attr_lvl3_slots_total' value='0'>
  <input type='hidden' name='attr_lvl4_slots_total' value='0'>
  <input type='hidden' name='attr_lvl5_slots_total' value='0'>
  <input type='hidden' name='attr_lvl6_slots_total' value='0'>
  <input type='hidden' name='attr_lvl7_slots_total' value='0'>
  <input type='hidden' name='attr_lvl8_slots_total' value='0'>
  <input type='hidden' name='attr_lvl9_slots_total' value='0'>
  <input type='hidden' name='attr_show_death_failures_flag' value='1'>
  <input type='hidden' name='attr_show_exhaustion_flag' value='1'>
  <input type='hidden' name='attr_show_stress_flag' value='1'>
  <input type='hidden' name='attr_show_survival_conditions' value='1'>
  <input type='hidden' name='attr_use_inventory_slots' value='1'>
  <input type='hidden' name='attr_use_intelligent_initiative' value='1'>
  <!-- COMPENDIUM DROP CATCHERS -->
  <input type="hidden" name="attr_drop_category" accept="Category">
  <input type="hidden" name="attr_drop_name" accept="Name">
  <input type="hidden" name="attr_drop_data" accept="data">
  <input type="hidden" name="attr_drop_content" accept="Content">
</div>

<rolltemplate class="sheet-rolltemplate-rolls">
  <div class="sheet-container">
    <div class="sheet-header">
      {{#title}}<div class="sheet-title">{{title}}</div>{{/title}}
      {{#name}}<div class="sheet-name">{{name}}</div>{{/name}}
      {{#subtitle}}<div class="sheet-subtitle">{{subtitle}}</div>{{/subtitle}}
    </div>
    <div class="sheet-content">
      {{#allprops() title name subtitle desc}}
      <div class="sheet-key">{{key}}</div>
      <div class="sheet-value">{{value}}</div>
      {{/allprops() title name subtitle desc}}
      {{#desc}}<div class="sheet-desc">{{desc}}</div>{{/desc}}
    </div>
  </div>
</rolltemplate>

<!-- <script> -->
  <script type="text/worker">

  // On change Attribute Base -> change attribute value for next actions
  ['strength', 'dexterity', 'constitution', 'intelligence', 'wisdom', 'charisma'].forEach(attr => {
    on(`change:${attr}_base`, function () {
      update_attr(`${attr}`);
    });
  });

  // On change Attribute Value update Modifiers
  ['strength', 'dexterity', 'constitution', 'intelligence', 'wisdom', 'charisma'].forEach(attr => {
    on(`change:${attr}`, function () {
      update_mod(`${attr}`)
    });
  });

  // On change attribute modifier update linked properties
  ['strength', 'dexterity', 'constitution', 'intelligence', 'wisdom', 'charisma'].forEach(attr => {
				on(`change:${attr}_mod`, function() {
					update_save(`${attr}`);

					switch (`${attr}`) {
						case "strength":
              update_flint();
							break;
            case "wisdom":
              update_flint();
              break;
            case "constitution":
              update_flint();
							break;
            case "intelligence":
              update_spark();
              break;
            case "dexterity":
              update_spark();
							break;
						case "charisma":
              update_spark();
							break;
						default:
							false;
					};
				});
			});

  var update_attr = function (attr) {
    getAttrs([attr, attr + "_base"], function (v) {
      update = {};
      update[attr] = v[attr + "_base"];
      setAttrs(update)
    });
  }

  var update_mod = function (attr) {
    getAttrs([attr], function (v) {
      console.log("Start update " + attr + "_mod");
      console.log(v[attr]);
      var finalattr = v[attr] && isNaN(v[attr]) === false ? Math.floor((parseInt(v[attr], 10) - 10) / 2) : 0;
      console.log("finallattr = " + finalattr);
      var update = {};
      update[attr + "_mod"] = finalattr;
      setAttrs(update);
    });
  };

  var update_spark = function () {
    console.log("Start update spark");
    var attrs_to_get = ["dexterity_mod", "intelligence_mod", "charisma_mod"];
    console.log("attrs - " + attrs_to_get);
    getAttrs(attrs_to_get, function (v) {
      var update = {};
      var final_spark = Math.floor((parseInt(v["dexterity_mod"], 10) + parseInt(v["intelligence_mod"], 10) + parseInt(v["charisma_mod"], 10)) / 3);
      console.log("Final spark = " + final_spark);
      update["spark_mod"] = final_spark;
      setAttrs(update);
    });
  };

  var update_flint = function () {
    console.log("Start update flint");
    var attrs_to_get = ["strength_mod", "wisdom_mod", "constitution_mod"];
    getAttrs(attrs_to_get, function (v) {
      var update = {};
      var final_flint = Math.floor((parseInt(v["strength_mod"], 10) + parseInt(v["wisdom_mod"], 10) + parseInt(v["constitution_mod"], 10)) / 3);
      console.log("Final flint = " + final_flint);
      update["flint_mod"] = final_flint;
      setAttrs(update);
    });
  };

  var update_save = function (attr) {
    console.log("Start update save - " + attr);
  };

</script>

<!-- 

; -->